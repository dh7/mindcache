name = "mindcache-api"
main = "src/worker.ts"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]

# Durable Objects
[durable_objects]
bindings = [
  { name = "MINDCACHE_INSTANCE", class_name = "MindCacheInstanceDO" }
]

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "mindcache-db"
database_id = "29e53281-6ad2-4c90-b7de-27d55fcad594"
migrations_dir = "migrations"

# Migrations
[[ migrations ]]
tag = "v1"
new_sqlite_classes = ["MindCacheInstanceDO"]

# Environment variables (set via wrangler secret)
# CLERK_SECRET_KEY - for JWT verification
# CLERK_WEBHOOK_SECRET - for webhook signature verification

[vars]
ENVIRONMENT = "development"

# To set secrets, run:
# wrangler secret put CLERK_SECRET_KEY
# wrangler secret put CLERK_WEBHOOK_SECRET

